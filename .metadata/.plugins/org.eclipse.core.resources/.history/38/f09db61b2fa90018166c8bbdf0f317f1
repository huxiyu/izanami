/*
 * skiplist.h
 *
 *  Created on: 2018年8月26日
 *      Author: caojx
 */

#ifndef SKIPLIST_H_
#define SKIPLIST_H_

#include "workercommon.h"

struct steaminode {

	void *element;

	void *pre;
	void *post;
	void *upper;
	void *down;
};

typedef int (*elementcmp)(void *arg1, void* arg2);

struct leafinode {

	void *element;

	struct leafinode *pre;
	struct leafinode *post;
};

struct subskiplist {

	struct steaminode *head;
};

struct skiplist {

	int count;
	int layer;
	int repeatable;

	struct subskiplist *headlist;
	elementcmp cmp;
};

struct skiplist *initskiplist(elementcmp cmp);

void setrepeatable(struct skiplist *list);
/**
 * 从skiplist中删除element
 * 返回element对应的leafnode
 * 返回NULL表示没有element
 */
struct leafinode *deletefromskiplist(struct skiplist *list, void *element);

struct leafinode *findfromskiplist(struct skiplist *list, void *element);

struct leafinode *insertintoskiplist(struct skiplist *list, void *element);

#endif /* SKIPLIST_H_ */
